(this.webpackJsonpapi=this.webpackJsonpapi||[]).push([[0],{51:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),s=r(7),c=r.n(s),a=r(0),i=function(){return Object(a.jsxs)("div",{className:"header__wrap",children:[Object(a.jsx)("img",{src:"./logo.svg",alt:"logo"}),Object(a.jsx)("h1",{children:"Air Pollution"})]})},l=function(e){var t=e.setCoordinates,r=Object(n.useRef)(null);return Object(a.jsxs)("div",{className:"searchBar__wrap",children:[Object(a.jsx)("h2",{children:"Enter city name :"}),Object(a.jsxs)("form",{className:"searchBar__form",onSubmit:function(e){return t(e,r.current.value)},children:[Object(a.jsx)("input",{type:"text",ref:r}),Object(a.jsx)("button",{type:"submit",children:"Search"})]})]})},u=function(e){var t=e.onClickFunction;return Object(a.jsx)("div",{onClick:t,className:"item__arrow",children:Object(a.jsx)("img",{src:"./images/arrowLeft.svg",alt:"forward"})})},d=function(e){var t=e.onClickFunction;return Object(a.jsx)("div",{onClick:t,className:"item__arrow",children:Object(a.jsx)("img",{src:"./images/arrowRight.svg",alt:"backward"})})},j={setaqiColor:function(e){return e<=50?"#00af50":e>50&&e<=100?"#debd43":e>100&&e<=150?"#fec100":e>150&&e<=200?"#fe0000":e>200&&e<=300?"#bf0001":e>300&&e<=500?"#581845":void 0},setpm10Color:function(e){return e<=50?"#00af50":e>50&&e<=100?"#fec100":e>100&&e<=150?"#fe0000":e>150?"#bf0001":void 0},setpm25Color:function(e){return e<=10?"#00af50":e>10&&e<=25?"#fec100":e>25&&e<=35?"#fe0000":e>35?"#bf0001":void 0},seto3Color:function(e){return e<=54?"#00af50":e>55&&e<=70?"#ffff00":e>71&&e<=85?"#fec100":e>86&&e<=105?"#fe0000":e>106&&e<=200?"#7030a1":e>201?"#bf0001":void 0},setso2Color:function(e){return e<=5?"#00af50":e>5&&e<=7?"#fec100":e>7&&e<=10?"#fe0000":e>10?"#bf0001":void 0},setno2Color:function(e){return e<=150?"#00af50":e>150&&e<=200?"#fec100":e>200&&e<=250?"#fe0000":e>250?"#bf0001":void 0},setcoColor:function(e){return e<=90?"#00af50":e>90&&e<=100?"#fec100":e>100&&e<=150?"#fe0000":e>150?"#bf0001":void 0}},f=function(e){return e.substring(0,e.length-3)},h=function(e){return e.substring(e.lastIndexOf(",")+2,e.length)},p=function(e){var t=e.itemType,r=e.pollution,n=e.barvalueScale;return Object(a.jsxs)("div",{className:"item__wrap",children:[Object(a.jsx)(u,{onClickFunction:function(){return function(e){for(var t=parseInt(e[0].style.left.slice(0,e[0].style.left.length-2),10),r=0;r<e.length;r++)t<0&&(e[r].style.left=t+e[r].offsetWidth+"px")}(document.getElementsByClassName("".concat(t,"__wrap")))}}),Object(a.jsx)("div",{className:"item__content",children:r.map((function(e){return Object(a.jsxs)("div",{className:"".concat(t,"__wrap"),children:[Object(a.jsx)("div",{className:"".concat(t,"__value"),style:{color:j["set"+t+"Color"](e[t])},children:e[t]}),Object(a.jsx)("div",{className:"".concat(t,"__content"),children:Object(a.jsx)("div",{className:"".concat(t,"__bar"),style:{height:"".concat(e[t]/n,"%"),backgroundColor:j["set"+t+"Color"](e[t])}})}),Object(a.jsx)("div",{className:"".concat(t,"__time"),children:(r=e.datetime,"".concat(r.substring(r.length-2,r.length),":00"))}),Object(a.jsx)("div",{className:"".concat(t,"__day"),children:f(e.datetime)})]});var r}))}),Object(a.jsx)(d,{onClickFunction:function(){return function(e,t){for(var r=e[0].style.left.slice(0,e[0].style.left.length-2),n=0;n<e.length;n++)e[e.length-1].getBoundingClientRect().right>t[0].getBoundingClientRect().right&&(e[n].style.left=r-e[n].offsetWidth+"px")}(document.getElementsByClassName("".concat(t,"__wrap")),document.getElementsByClassName("item__content"))}})]})},b=function(e){var t=e.cityName,r=e.coordinates,n=e.pollution;return Object(a.jsx)("div",{className:"results__wrap",children:t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:[t,", ",r.country," (",Math.abs(parseFloat(r.lat).toFixed(2)),r.NorthOrSouth,","," ",Math.abs(parseFloat(r.lon).toFixed(2)),r.EastOrWest,")"," "]}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"AQI"}),Object(a.jsx)("div",{className:"results__info-aqi",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"aqi",pollution:n,barvalueScale:5}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"PM10"}),Object(a.jsx)("div",{className:"results__info-pm10",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"pm10",pollution:n,barvalueScale:2.5}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"PM25"}),Object(a.jsx)("div",{className:"results__info-pm25",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"pm25",pollution:n,barvalueScale:.5}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"O3"}),Object(a.jsx)("div",{className:"results__info-o3",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"o3",pollution:n,barvalueScale:3}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"SO2"}),Object(a.jsx)("div",{className:"results__info-so2",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"so2",pollution:n,barvalueScale:.5}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"NO2"}),Object(a.jsx)("div",{className:"results__info-no2",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"no2",pollution:n,barvalueScale:3}),Object(a.jsxs)("div",{className:"results__title",children:[Object(a.jsx)("h2",{children:"CO"}),Object(a.jsx)("div",{className:"results__info-co",children:Object(a.jsx)("img",{src:"./images/info.svg",alt:"info"})})]}),Object(a.jsx)(p,{itemType:"co",pollution:n,barvalueScale:10})]})})},m=function(){return Object(a.jsx)("section",{className:"about__wrap",children:Object(a.jsxs)("article",{children:[Object(a.jsx)("p",{children:"Welcome to 72 hours air pollution forecast. Here you can check forecast for every place on Earth, you only have to write city name in the browser above."}),Object(a.jsx)("p",{children:"Forecast predicts general AQI (Air quality Index), exact level of 4 harmful chemical compounds: O3, SO2, NO2, CO and level of 2 particulates: PM 10 and PM 25. Move cursor on info sign over overy graph, to read more info about every pollution."}),Object(a.jsx)("p",{children:"Attention! Page shows current pollution level, but it doesn't refresh automatically every 1 hour"})]})})},g=function(e){var t=e.type,r=e.message,n=e.cityName;return console.log(t),"content"===t?Object(a.jsxs)("div",{className:"error__wrap",children:['City "',n,' does not exist!"']}):(t="content")?Object(a.jsx)("div",{className:"error__wrap",children:r}):Object(a.jsx)("div",{className:"error__wrap",children:"Unknown error has occured"})},O=function(){return Object(a.jsxs)("div",{className:"footer__wrap",children:[Object(a.jsx)("h2",{children:"Air pollution forecast"}),Object(a.jsx)("h3",{children:"Jakub Wr\xf3bel 2021"})]})},v=r(8),x=r.n(v),_=["0a3721b488mshff1100bffdf698ep1c7b70jsn159ebd258e49","787ee38389mshcae9524e10a67d5p1b4adejsn8dce84db2f3d"],y=function(e){return{type:"SET_ENTERED_NAME",payload:e}},N=function(e,t){return{type:"CHANGE_COORDINATES",payload:{res:e,func:function(e){return t(e)}}}},E=function(e){return{type:"SET_POLLUTION",payload:e}},w=function(e,t){return{type:"SET_ERROR",payload:{errorType:e,errorMessage:t}}},C=function(){return{type:"RESET_ERROR"}},T=r(9),S=Object(T.b)((function(e){return e}),(function(e){return{setEnteredName:function(t){return e(y(t))},changeCoordinates:function(t,r){return e(N(t,r))},setPollution:function(t){return e(E(t))},setError:function(t,r){return e(w(t,r))},resetError:function(){return e(C())}}}))((function(e){var t=e.location,r=e.pollution,o=e.error,s=e.setEnteredName,c=e.changeCoordinates,u=e.setPollution,d=e.setError,j=e.resetError,f=function e(t,r,n){(function(e,t,r){var n={method:"GET",url:"https://air-quality.p.rapidapi.com/forecast/airquality",params:{lat:e.lat,lon:e.lon,hours:t},headers:{"x-rapidapi-host":"air-quality.p.rapidapi.com","x-rapidapi-key":_[r]}};return x.a.request(n)})(t,r,n).then((function(e){u(e.data.data),j()})).catch((function(o){switch(!0){case 429===o.response.status:n<_.length-1?(n++,e(t,r,n)):(console.log("Error while connecting to forecast API. More info: ",o.response),d("connection","Because of data provider's requests limit, getting and displaying more data is currently not available. Try again after 24 hours."));break;case o.response.status>=300&&o.response.status<400:console.log("Error while connecting to forecast API. More info: ",o.response),d("connection","Page has been redirected");break;case o.response.status>=400&&429!==o.response.status&&o.response.status<500:console.log("Error while connecting to forecast API. More info: ",o.response),d("connection","Client error has occured");break;case o.response.status>=500:console.log("Error while connecting to forecast API. More info: ",o.response),d("connection","Server error has occured. Try again later");break;default:d("connection","Undefined error has occured. Try again later.")}}))},p="";return p=t.enteredName.length>0?o.errorType.length>0?Object(a.jsx)(g,{type:o.errorType,message:o.errorMessage,cityName:t.enteredName}):Object(a.jsx)(b,{cityName:t.enteredName,coordinates:t,pollution:r}):Object(a.jsx)(m,{}),Object(n.useEffect)((function(){t.lat.length>0&&t.lon.length>0&&f(t,"72",0)}),[t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i,{}),Object(a.jsx)(l,{setCoordinates:function(e,t){s(t),function(e,t){var r={method:"GET",url:"https://forward-reverse-geocoding.p.rapidapi.com/v1/search",params:{q:t,"accept-language":"en",polygon_threshold:"0.0"},headers:{"x-rapidapi-host":"forward-reverse-geocoding.p.rapidapi.com","x-rapidapi-key":"dd31c8c14cmsh2ab1c44907f3c88p1bcb1cjsnd1b772d2c469"}};return e.preventDefault(),x.a.request(r)}(e,t).then((function(e){return e.data})).then((function(e){"undefined"==typeof e.length?d("content","City does not exist"):(j(),c(e[0],h))})).catch((function(e){switch(!0){case 429===e.response.status:console.log("Error while connecting to forecast API. More info: ",e.response),d("connection","Too many requests. You can do up to 4 requests per second");break;case e.response.status>=300&&e.response.status<400:console.log("Error while connecting to geocoding API. More info: ",e.response),d("connection","Page has been redirected");break;case e.response.status>=400&&429!==e.response.status&&e.response.status<500:console.log("Error while connecting to geocoding API. More info: ",e.response),d("connection","Client error has occured");break;case e.response.status>=500:console.log("Error while connecting to geocoding API. More info: ",e.response),d("connection","Server error has occured. Try again later");break;default:d("connection","Undefined error has occured. Try again later.")}}))}}),p,Object(a.jsx)(O,{})]})})),k=r(4),R=r(21),P=r(3),M={enteredName:"",lat:"",lon:"",NorthOrSouth:"",EastOrWest:"",country:""},A=[],I={errorType:"",errorMessage:""},F=Object(k.combineReducers)({location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENTERED_NAME":return Object(P.a)(Object(P.a)({},e),{},{enteredName:t.payload});case"CHANGE_COORDINATES":return Object(P.a)(Object(P.a)({},e),{},{lat:t.payload.res.lat,lon:t.payload.res.lon,NorthOrSouth:parseFloat(t.payload.res.lat)>0?"N":"S",EastOrWest:parseFloat(t.payload.res.lon)>0?"E":"W",country:t.payload.func(t.payload.res.display_name)});default:return e}},pollution:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;return"SET_POLLUTION"===t.type?t.payload:e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return Object(P.a)(Object(P.a)({},e),t.payload);case"RESET_ERROR":return I;default:return e}}}),q=Object(k.createStore)(F,Object(R.composeWithDevTools)());r(51);var B=function(){return Object(a.jsx)("div",{className:"app__wrapper",children:Object(a.jsx)(T.a,{store:q,children:Object(a.jsx)(S,{})})})},W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,53)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),o(e),s(e),c(e)}))};c.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),W()}},[[52,1,2]]]);
//# sourceMappingURL=main.b8a4b543.chunk.js.map