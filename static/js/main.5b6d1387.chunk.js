(this.webpackJsonpapi=this.webpackJsonpapi||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),r=n(19),a=n.n(r),o=(n(25),n(20)),i=n(1),l=n(6),u=n(4),j=n.n(u),d=n(0),b=function(){return Object(d.jsxs)("div",{className:"header__wrap",children:[Object(d.jsx)("img",{src:"./logo.svg"}),Object(d.jsx)("h1",{children:"Air Pollution"})]})},f=function(e){var t=e.setCoordinates,n=Object(c.useRef)(null);return Object(d.jsxs)("div",{className:"searchBar__wrap",children:[Object(d.jsx)("h2",{children:"Enter city name :"}),Object(d.jsxs)("form",{className:"searchBar__form",onSubmit:function(e){return t(e,n.current.value)},children:[Object(d.jsx)("input",{type:"text",ref:n}),Object(d.jsx)("button",{type:"submit",children:"Search"})]})]})},h=function(e){var t=e.onClickFunction;return Object(d.jsx)("div",{onClick:t,className:"item__arrow",children:Object(d.jsx)("img",{src:"./images/arrowLeft.svg"})})},p=(n.p,function(e){var t=e.onClickFunction;return Object(d.jsx)("div",{onClick:t,className:"item__arrow",children:Object(d.jsx)("img",{src:"./images/arrowRight.svg"})})}),m={setaqiColor:function(e){return e<=50?"#00af50":e>50&&e<=100?"#debd43":e>100&&e<=150?"#fec100":e>150&&e<=200?"#fe0000":e>200&&e<=300?"#bf0001":e>300&&e<=500?"#581845":void 0},setpm10Color:function(e){return e<=50?"#00af50":e>50&&e<=100?"#fec100":e>100&&e<=150?"#fe0000":e>150?"#bf0001":void 0},setpm25Color:function(e){return e<=10?"#00af50":e>10&&e<=25?"#fec100":e>25&&e<=35?"#fe0000":e>35?"#bf0001":void 0},seto3Color:function(e){return e<=54?"#00af50":e>55&&e<=70?"#ffff00":e>71&&e<=85?"#fec100":e>86&&e<=105?"#fe0000":e>106&&e<=200?"#7030a1":e>201?"#bf0001":void 0},setso2Color:function(e){return e<=5?"#00af50":e>5&&e<=7?"#fec100":e>7&&e<=10?"#fe0000":e>10?"#bf0001":void 0},setno2Color:function(e){return e<=150?"#00af50":e>150&&e<=200?"#fec100":e>200&&e<=250?"#fe0000":e>250?"#bf0001":void 0},setcoColor:function(e){return e<=90?"#00af50":e>90&&e<=100?"#fec100":e>100&&e<=150?"#fe0000":e>150?"#bf0001":void 0}},O=function(e){return e.substring(0,e.length-3)},g=function(e){var t=e.itemType,n=e.pollutionHelp,c=e.barvalueScale;return Object(d.jsxs)("div",{className:"item__wrap",children:[Object(d.jsx)(h,{onClickFunction:function(){return function(e){for(var t=parseInt(e[0].style.left.slice(0,e[0].style.left.length-2),10),n=0;n<e.length;n++)t<0&&(e[n].style.left=t+e[n].offsetWidth+"px")}(document.getElementsByClassName("".concat(t,"__wrap")))}}),Object(d.jsx)("div",{className:"item__content",children:n.map((function(e){return Object(d.jsxs)("div",{className:"".concat(t,"__wrap"),children:[Object(d.jsx)("div",{className:"".concat(t,"__value"),style:{color:m["set"+t+"Color"](e[t])},children:e[t]}),Object(d.jsx)("div",{className:"".concat(t,"__content"),children:Object(d.jsx)("div",{className:"".concat(t,"__bar"),style:{height:"".concat(e[t]/c,"%"),backgroundColor:m["set"+t+"Color"](e[t])}})}),Object(d.jsx)("div",{className:"".concat(t,"__time"),children:(n=e.datetime,"".concat(n.substring(n.length-2,n.length),":00"))}),Object(d.jsx)("div",{className:"".concat(t,"__day"),children:O(e.datetime)})]});var n}))}),Object(d.jsx)(p,{onClickFunction:function(){return function(e,t){for(var n=e[0].style.left.slice(0,e[0].style.left.length-2),c=0;c<e.length;c++)e[e.length-1].getBoundingClientRect().right>t[0].getBoundingClientRect().right&&(e[c].style.left=n-e[c].offsetWidth+"px")}(document.getElementsByClassName("".concat(t,"__wrap")),document.getElementsByClassName("item__content"))}})]})},x=function(e){var t=e.cityName,n=e.coordinates,c=e.pollution;return Object(d.jsx)("div",{className:"results__wrap",children:t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("h1",{children:[t,", ",n.country," (",Math.abs(parseFloat(n.lat).toFixed(2)),n.NorthOrSouth,", ",Math.abs(parseFloat(n.lon).toFixed(2)),n.EastOrWest,") "]}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"AQI"}),Object(d.jsx)("div",{className:"results__info-aqi",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"aqi",pollutionHelp:c,barvalueScale:5}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"PM10"}),Object(d.jsx)("div",{className:"results__info-pm10",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"pm10",pollutionHelp:c,barvalueScale:2.5}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"PM25"}),Object(d.jsx)("div",{className:"results__info-pm25",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"pm25",pollutionHelp:c,barvalueScale:.5}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"O3"}),Object(d.jsx)("div",{className:"results__info-o3",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"o3",pollutionHelp:c,barvalueScale:3}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"SO2"}),Object(d.jsx)("div",{className:"results__info-so2",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"so2",pollutionHelp:c,barvalueScale:.5}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"NO2"}),Object(d.jsx)("div",{className:"results__info-no2",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"no2",pollutionHelp:c,barvalueScale:3}),Object(d.jsxs)("div",{className:"results__title",children:[Object(d.jsx)("h2",{children:"CO"}),Object(d.jsx)("div",{className:"results__info-co",children:Object(d.jsx)("img",{src:"./images/info.svg"})})]}),Object(d.jsx)(g,{itemType:"co",pollutionHelp:c,barvalueScale:10})]})})},v=function(){return Object(d.jsx)("section",{className:"about__wrap",children:Object(d.jsxs)("article",{children:[Object(d.jsx)("p",{children:"Welcome to 72 hours air pollution forecast. Here you can check forecast for every place on Earth, you only have to write city name in the browser above."}),Object(d.jsx)("p",{children:"Forecast predicts general AQI (Air quality Index), exact level of 4 harmful chemical compounds: O3, SO2, NO2, CO and level of 2 particulates: PM 10 and PM 25. Move cursor on info sign over overy graph, to read more info about every pollution."}),Object(d.jsx)("p",{children:"Attention! Page shows current pollution level, but it doesn't refresh automatically every 1 hour"})]})})},y=function(e){var t=e.type,n=e.message,c=e.cityName;return"content"==t?Object(d.jsxs)("div",{className:"error__wrap",children:['City "',c,' does not exist!"']}):(t="content")?Object(d.jsx)("div",{className:"error__wrap",children:n}):Object(d.jsx)("div",{className:"error__wrap",children:"Unknown error has occured"})},_=function(){return Object(d.jsxs)("div",{className:"footer__wrap",children:[Object(d.jsx)("h2",{children:"Air pollution forecast"}),Object(d.jsx)("h3",{children:"Jakub Wr\xf3bel 2021"})]})},N=["50bf83cea7msh256e50596707c81p1bda08jsnfa836124e987","8cb705c6cfmsh0a3c87eb6ca9cf5p14a1a7jsn92aa1ee82eab","dd31c8c14cmsh2ab1c44907f3c88p1bcb1cjsnd1b772d2c469","edabb595a8mshc8280ddb349e608p156bb9jsn8072ab5b0200"],w=function(e){e.children;var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)({lat:"",lon:"",NorthOrSouth:"",EastOrWest:"",country:""}),u=Object(l.a)(a,2),h=u[0],p=u[1],m=Object(c.useState)([]),O=Object(l.a)(m,2),g=O[0],w=O[1],C=Object(c.useState)({type:"",message:""}),S=Object(l.a)(C,2),k=S[0],E=S[1],P=function e(t,n,c){console.log(c),function(e,t,n){var c={method:"GET",url:"https://air-quality.p.rapidapi.com/forecast/airquality",params:{lat:e.lat,lon:e.lon,hours:t},headers:{"x-rapidapi-host":"air-quality.p.rapidapi.com","x-rapidapi-key":N[n]}};return j.a.request(c)}(t,n,c).then((function(e){w((function(t){return Object(o.a)(e.data.data)})),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"",message:""})}))})).catch((function(s){switch(!0){case 429==s.response.status:c<N.length-1?(c++,e(t,n,c)):(console.log("Error while connecting to forecast API. More info: ",s.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Because of data provider's requests limit, getting and displaying more data is currently not available. Try again after 24 hours."})})));break;case s.response.status>=300&&s.response.status<400:console.log("Error while connecting to forecast API. More info: ",s.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Page has been redirected"})}));break;case s.response.status>=400&&429!=s.response.status&&s.response.status<500:console.log("Error while connecting to forecast API. More info: ",s.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Client error has occured"})}));break;case s.response.status>=500:console.log("Error while connecting to forecast API. More info: ",s.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Server error has occured. Try again later"})}));break;default:E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Undefined error has occured. Try again later."})}))}}))},T="";return T=s.length>0?k.type.length>0?Object(d.jsx)(y,{type:k.type,message:k.message,cityName:s}):Object(d.jsx)(x,{cityName:s,coordinates:h,pollution:g}):Object(d.jsx)(v,{}),Object(c.useEffect)((function(){h.lat.length>0&&h.lon.length>0&&P(h,"72",0)}),[h]),console.log(h),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{}),Object(d.jsx)(f,{setCoordinates:function(e,t){r(t),function(e,t){var n={method:"GET",url:"https://forward-reverse-geocoding.p.rapidapi.com/v1/search",params:{q:t,"accept-language":"en",polygon_threshold:"0.0"},headers:{"x-rapidapi-host":"forward-reverse-geocoding.p.rapidapi.com","x-rapidapi-key":"dd31c8c14cmsh2ab1c44907f3c88p1bcb1cjsnd1b772d2c469"}};return e.preventDefault(),j.a.request(n)}(e,t).then((function(e){return e.data})).then((function(e){"undefined"==typeof e.length?E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"content",message:"City does not exist"})})):(E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"",message:""})})),p((function(t){return Object(i.a)(Object(i.a)({},t),{},{lat:e[0].lat,lon:e[0].lon,NorthOrSouth:parseFloat(e[0].lat)>0?"N":"S",EastOrWest:parseFloat(e[0].lon)>0?"E":"W",country:(n=e[0].display_name,n.substring(n.lastIndexOf(",")+2,n.length))});var n})))})).catch((function(e){switch(!0){case 429==e.response.status:console.log("Error while connecting to forecast API. More info: ",e.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Too many requests. You can do up to 4 requests per second"})}));break;case e.response.status>=300&&e.response.status<400:console.log("Error while connecting to geocoding API. More info: ",e.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Page has been redirected"})}));break;case e.response.status>=400&&429!=e.response.status&&e.response.status<500:console.log("Error while connecting to geocoding API. More info: ",e.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Client error has occured"})}));break;case e.response.status>=500:console.log("Error while connecting to geocoding API. More info: ",e.response),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Server error has occured. Try again later"})}));break;default:E((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"connection",message:"Undefined error has occured. Try again later."})}))}}))}}),T,Object(d.jsx)(_,{})]})};n(45);var C=function(){return Object(d.jsx)("div",{className:"app__wrapper",children:Object(d.jsx)(w,{})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),S()}},[[46,1,2]]]);
//# sourceMappingURL=main.5b6d1387.chunk.js.map